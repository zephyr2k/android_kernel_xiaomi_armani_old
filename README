15th Feb - 2015

- Starting CM12 porting to armani(Redmi 1s) from scratch.
- Previous work 
	- Error free compile 
	- Use of caf variants for display & media
	- Encoder & Decoderfrom hardware_qcom_* giving problems. Commented it out from corresponding Android.mk.
	- bringing msm8974 based msm* header files to kernel
	- implementing cm based power hal
	-- failed to boot 
		- logs of kmseg and adb present indicating maybe wrong permission set
		- missing keymaster.mdt error in kmsg (fixed by updating vendor folder)
		- learnt working around kernel with KBuild, messing with asm , asm-generic folders , along with gpu drivers

CURRENT WORK
- Importing device, kernel, proprietary from armani dev. 
- Switching devices to corresponding cm-12.0 branches.
- Including caf-display-new & caf-media-new of cm-11.0 from armani-dev (may be incorporated based on needs)

- Will add further info for each error encountered and possible workarounds

16th Feb - 2015

- Compiling started 
	- Fixed mkbootimg.mk error for dbtcm 
	- Changed powerHal from qcom to cm for compatiblity ( Monitoring Falcon deivce tree)
	- hardware/qcom/display-caf/msm8226/liboverlay/overlayUtils.h:274:30: error: 'MDP_SMP_FORCE_ALLOC' was not declared in this scope
		-- Fixed by #define MDP_SMP_FORCE_ALLOC in  drivers/video/msm/mdss/mdss_mdp_pipe.c & include/linux/msm_mdp.h 
		-- Merged with http://review.cyanogenmod.org/#/c/78888/
	- hardware/qcom/media-caf/msm8226/mm-video-v4l2/vidc/venc/src/omx_video_encoder.cpp:1078:32: error: 'VEN_EXTRADATA_MBINFO' was not declared in this scope
		-- Fixed by merging https://gitlab.com/k2wl/g2_kernel/commit/e808b4b6958cc38e2655260319868942f455e67f
	- armani/drivers/media/platform/msm/vidc/msm_venc.c:653:10: error: 'V4L2_MPEG_VIDC_EXTRADATA_LTR' undeclared here (not in a function)
		-- Merged https://gitlab.com/k2wl/g2_kernel/commit/f0294f9ee1a8094f86f6010dc7a4cfbfe0bbace7 && also refer falcon source
	- hardware/qcom/media-caf/msm8226/mm-video-v4l2/vidc/venc/src/video_encoder_device_v4l2.cpp:2625:18: error: 'V4L2_CID_MPEG_VIDC_VIDEO_HIER_P_NUM_LAYERS' was not declared in this scope
	- error: 'V4L2_CID_MPEG_VIDC_VIDEO_MARKLTRFRAME' was not declared in this scope
	- error: 'V4L2_CID_MPEG_VIDC_VIDEO_LTRCOUNT' was not declared in this scope
	- error: 'V4L2_CID_MPEG_VIDC_VIDEO_I_FRAME_QP' was not declared in this scope, etc
	{
		-- Merged from falcon : drivers/media/platform/msm/vidc/msm_venc.c 
	}
	- /vidc/vdec/src/omx_vdec_msm8974.cpp:8691:22: error: 'EXTRADATA_FRAME_BITS_INFO' was not declared in this scope
	- error: 'EXTRADATA_FRAME_QP' was not declared in this scope
	- error: invalid use of incomplete type 'struct msm_vidc_frame_bits_info_payload'
	{
		-- Merged falcon sources taking commit id: 9ffe3028067eea223644a4115b3b64a726f490c0 as base patch
	}
	-  hardware/qcom/media-caf/msm8226/mm-video-v4l2/vidc/vdec/src/omx_vdec_msm8974.cpp:7184:64: error: 'struct vdec_output_frameinfo' has no member named 'picsize'
		-- merge patch https://gitlab.com/k2wl/g2_kernel/commit/2a224d93a3b24aa6c5e819db6f701bab00583f60.patch
	- hardware/qcom/media-caf/msm8226/mm-video-v4l2/vidc/venc/src/video_encoder_device_v4l2.cpp:2625:18: error: 'V4L2_CID_MPEG_VIDC_VIDEO_HIER_P_NUM_LAYERS' was not declared in this scope
	- error: 'V4L2_CID_MPEG_VIDC_VIDEO_LTRMODE' was not declared in this scope
	{
		-- partial merge of patch https://gitlab.com/k2wl/g2_kernel/commit/3b37c9b267191c900edab665d29f007db2a288b2
	}
	- hardware/qcom/media-caf/msm8226/mm-video-v4l2/vidc/vdec/src/omx_vdec_msm8974.cpp:3786:30: error: 'V4L2_CID_MPEG_VIDC_VIDEO_BUFFER_SIZE_LIMIT' was not declared in this scope
		-- pathched videodev2.h from falcon & merge this https://gitlab.com/k2wl/g2_kernel/commit/3f145242ae9d755a8538dfb3f903a56605b9c89f
	- hci_conn.c:407:28: warning: argument to 'sizeof' in 'memcpy' call is the same pointer type '__u8 *' as the destination; expected '__u8' or an explicit length [-Wsizeof-pointer-memaccess]
error, forbidden warning: hci_conn.c:407
		-- https://github.com/syhost/android_kernel_xiaomi_msm8226-common/commit/151782ef7b50f7d6b2f48c358743c5c69fdec49f
	- error: unknown field 'cluster' specified in initializer in msm_vdec.c
   .cluster = 0,
		-- Maybe revert ( ? )

Feb 17 - 2015
	- msm_vdec.c:355:22: error: 'struct msm_vidc_core_capability' has no member named 'mbs_per_frame'
		-- merge msm_vidc_internal.h from falcon
	- ernel/xiaomi/armani/drivers/media/platform/msm/vidc/msm_vdec.c:1229:12: warning: 'msm_vdec_queue_output_buffers' defined but not used [-Wunused-function]
error, forbidden warning: msm_vdec.c:1229
		-- removed from source all .cluster defintion from both vdec.c & v.enc.c
	- drivers/media/platform/msm/vidc/msm_venc.c:2203:48: error: 'struct msm_vidc_ctrl' has no member named 'priv'
    return (struct v4l2_ctrl *)msm_venc_ctrls[c].priv;
		-- consolidated merge of all cluster based error https://bot.bricked.de/bricked/bacon/commit/e9d08d20979e6e3afd4b26a88ed8e933ef607d4a.diff
	- /drivers/video/msm/mdss/mdss_mdp_pipe.c:299:2: error: 'force_alloc' undeclared (first use in this function)
  force_alloc = pipe->flags & MDP_SMP_FORCE_ALLOC; 
		-- add defn from falcon
	

